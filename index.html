<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Budgetter</title>
	<link rel="stylesheet/less" href="css/main.less" />
	<script src="js/less-1.0.33.min.js" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<!-- 	<script src="http://github.com/jamespadolsey/jQuery-Lint/raw/master/jquery.lint.js"></script> -->
	<link href="http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold" rel="stylesheet" />
<!--
	<script src="fancybox/jquery.fancybox-1.3.1.js"></script>
	<link href="fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet" />
-->
	<script src="js/math-string-parser.js"></script>
	<script src="js/core.js"></script>
	<script src="js/budget.js"></script>
	<script src="js/menu.js"></script>
	<script src="application.js"></script>
	<script type="text/javascript" charset="utf-8">
	    less.env = "development";
	    less.watch();
	    less.poll = 150;
	    jQuery.event.props.push("dataTransfer");
	    	    
	    jQuery( function ($) {
	    	var Menu = _budgetter.getModule('menu'),
	    		Budget = _budgetter.getModule('budget'),
	    		Modal = _budgetter.getModule('modal');	
/*
			
			$( Menu.getContainer ).delegate('button[data-item-modal="true"]', 'click', function () {
				var pointer = $(this).attr('data-modal-window');
				$.fancybox({
					content: $('#' + pointer).clone().show()
				});
			});
*/
			
/*
			$('#newBudget').submit( function (e) {
				e.preventDefault();
				
				var budgetName = $('input[type="text"]', this).val();
				
				Budget.newBudget( budgetName );
			});
*/
			
			
/*
			var colMover = $('#col-mover'),
				budgetCol = $('#col1'),
				mouseKeyDown = false;
			
			$(document).bind('mousemove', function (e) {
				if (mouseKeyDown) {
					e.preventDefault();
					
					var x = e.clientX;
					if (x < 250) {
						return false;
					}
					colMover.css('left', x);
					budgetCol.css('width', x);
				}
			});
			
			colMover.bind('mousedown mouseup', function (e) {
				mouseKeyDown = e.type === 'mousedown' ? true : false;
			});

			$('table').delegate('tr', 'dragstart', function (e) {
				e.dataTransfer.effectAllowed = 'move';
				e.dataTransfer.setData('Text', $(this).children('th').attr('data-id'));
				console.log(e);
			});
			$('tbody').bind('dragover dragenter', function (e) {
				e.preventDefault();
			});
			$('tbody').bind('drop', function (e) {
				console.log(e);
			});
*/
		});
	</script>
</head>
<body>
	<header id="head">
		<h1>Budgetter</h1>
		<menu id="menuContainer"></menu>
	</header>
	<div id="main">
		<div id="left">
			<nav>
				<h1>Your budgets</h1>
				<ul id="budgets"></ul>
				<form id="addBudget">
					<p><input type="text" name="budget-name" placeholder="Budget name" /></p>
					<input type="submit" value="Add" />
				</form>
			</nav>
		</div>
		<div id="right">
			<div id="budgetInfo">
				<h1 contenteditable>Budget name</h1>
				<p class="description" contenteditable>Description</p>
			</div>
			<form id="newCalculation">
				<input type="text" name="calculation" placeholder="Add expense" />
				<input type="submit" value="do it" />
			</form>
			<div class="budget-wrap">
				<table id="budget">
					<col id="col1" />
					<tfoot>
						<tr>
							<th>Total</th>
							<td id="totalAmount"></td>
						</tr>
					</tfoot>
					<tbody>
					</tbody>
				</table>
			</div>
			<div id="totalFixed">
				<p class="label">Total</p>
				<p class="amount">1337</p>
			</div>
		</div>
	</div>
	<div id="settingsWrap">
		<div id="db" style="display:none;">adsad</div>
		<form id="newBudget" style="display:none;"><input type="text" name="budget_name" placeholder="Budget name" /></form>
	</div>
	<menu id="contextMenu" type="context">
		<li data-menu-action="rename"><span>Rename</span></li>
		<li data-menu-action="delete"><span>Delete</span></li>
	</menu>
	<script src="js/modal.js"></script>
</body>
</html>